<Window x:Class="CourseRegistrationSystem.EnrollmentWindow"
        xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
        Title="Enrollment" Height="720" Width="1100"
        WindowStartupLocation="CenterScreen"
        Background="#F4F6F9">

    <Grid Margin="20">
        <Grid.RowDefinitions>
            <RowDefinition Height="Auto"/>
            <!-- Search -->
            <RowDefinition Height="Auto"/>
            <!-- Cart -->
            <RowDefinition Height="*"/>
            <!-- Results -->
            <RowDefinition Height="Auto"/>
            <!-- Enrollment List -->
            <RowDefinition Height="Auto"/>
            <!-- Bottom Button -->
        </Grid.RowDefinitions>


        <!-- SEARCH BAR-->
        <Border Grid.Row="0" Background="White" Padding="15" CornerRadius="8"
                BorderBrush="#D0D7E1" BorderThickness="1" Margin="0 0 0 15">

            <StackPanel Orientation="Horizontal">

                <TextBlock Text="Select Term:" 
                           VerticalAlignment="Center" FontWeight="Bold"/>

                <ComboBox Name="termComboBox" Width="180" Margin="10 0"/>

                <TextBlock Text="Search Course:"
                           VerticalAlignment="Center" FontWeight="Bold" Margin="20 0 10 0"/>

                <TextBox Name="searchTextBox" Width="240" Margin="0 0 10 0"/>

                <Button Content="Search"
                        Padding="15,5"
                        Background="#3498DB"
                        Foreground="White"
                        BorderThickness="0"
                        Cursor="Hand"
                        Click="searchButton_Click"/>
            </StackPanel>
        </Border>
        <!--CART SECTION -->
        <GroupBox Grid.Row="1" Margin="0 0 0 15" Background="White">
            <GroupBox.HeaderTemplate>
                <DataTemplate>
                    <TextBlock Text="Your Cart" FontSize="18"
                               FontWeight="Bold" Foreground="#3498DB"/>
                </DataTemplate>
            </GroupBox.HeaderTemplate>

            <Border Background="White" Padding="5"
                    BorderBrush="#D0D7E1" BorderThickness="1">

                <DataGrid x:Name="CartGrid"
                          AutoGenerateColumns="False"
                          IsReadOnly="True"
                          RowHeight="35"
                          ColumnWidth="*"
                          Background="WhiteSmoke"
                          GridLinesVisibility="Horizontal"
                          HeadersVisibility="Column">

                    <DataGrid.Columns>
                        <DataGridTextColumn Header="Course Code" Binding="{Binding CourseCode}" Width="120"/>
                        <DataGridTextColumn Header="Course Name" Binding="{Binding CourseName}" Width="300"/>
                        <DataGridTextColumn Header="Credits" Binding="{Binding Credits}" Width="80"/>
                        <DataGridTextColumn Header="Term" Binding="{Binding TermName}" Width="150"/>

                        <!-- Remove + Enroll Buttons -->
                        <DataGridTemplateColumn Header="Action" Width="180">
                            <DataGridTemplateColumn.CellTemplate>
                                <DataTemplate>
                                    <StackPanel Orientation="Horizontal">

                                        <Button Content="Remove"
                                                Tag="{Binding CartID}"
                                                Background="#E74C3C"
                                                Foreground="White"
                                                Padding="6,2"
                                                Margin="0 0 5 0"
                                                BorderThickness="0"
                                                Cursor="Hand"
                                                Click="RemoveCartItem_Click"/>

                                        <Button Content="Enroll"
                                                Tag="{Binding SectionID}"
                                                Background="#2ECC71"
                                                Foreground="White"
                                                Padding="6,2"
                                                BorderThickness="0"
                                                Cursor="Hand"
                                                Click="EnrollFromCart_Click"/>

                                    </StackPanel>
                                </DataTemplate>
                            </DataGridTemplateColumn.CellTemplate>
                        </DataGridTemplateColumn>

                    </DataGrid.Columns>

                </DataGrid>

            </Border>
        </GroupBox>

        <!-- SEARCH RESULTS -->
        <Border Grid.Row="2" Background="White" Padding="10"
                CornerRadius="8" BorderBrush="#D0D7E1" BorderThickness="1">

            <DataGrid x:Name="resultsGrid"
                      AutoGenerateColumns="False"
                      IsReadOnly="True"
                      RowHeight="35"
                      ColumnWidth="*"
                      Background="WhiteSmoke"
                      GridLinesVisibility="Horizontal"
                      HeadersVisibility="Column">

                <DataGrid.Columns>
                    <DataGridTextColumn Header="Course Code" Binding="{Binding CourseCode}" Width="120"/>
                    <DataGridTextColumn Header="Course Name" Binding="{Binding CourseName}" Width="300"/>
                    <DataGridTextColumn Header="Term" Binding="{Binding TermName}" Width="120"/>
                    <DataGridTextColumn Header="Year" Binding="{Binding TermYear}" Width="100"/>
                    <DataGridTextColumn Header="Room" Binding="{Binding Room}" Width="120"/>
                    <DataGridTextColumn Header="Seats Left" Binding="{Binding SeatsRemaining}" Width="120"/>

                    <DataGridTemplateColumn Header="Action" Width="110">
                        <DataGridTemplateColumn.CellTemplate>
                            <DataTemplate>
                                <Button Content="Enroll"
                                        Padding="10,2"
                                        Background="#2ECC71"
                                        Foreground="White"
                                        BorderThickness="0"
                                        Cursor="Hand"
                                        Click="EnrollButton_Click"/>
                            </DataTemplate>
                        </DataGridTemplateColumn.CellTemplate>
                    </DataGridTemplateColumn>

                </DataGrid.Columns>

            </DataGrid>

        </Border>



        <!--  ENROLLMENT LIST -->
        <GroupBox Grid.Row="3" Margin="0 20 0 10"
                  x:Name="EnrollmentListBox"
                  Visibility="Collapsed">

            <GroupBox.HeaderTemplate>
                <DataTemplate>
                    <TextBlock Text="Your Enrollments"
                               FontSize="18" FontWeight="Bold" Foreground="#9B59B6"/>
                </DataTemplate>
            </GroupBox.HeaderTemplate>

            <DataGrid x:Name="enrollmentListGrid"
                      AutoGenerateColumns="False"
                      IsReadOnly="True"
                      RowHeight="35"
                      ColumnWidth="*"
                      Background="WhiteSmoke"
                      Margin="5">

                <DataGrid.Columns>
                    <DataGridTextColumn Header="Course Code" Binding="{Binding CourseCode}" Width="150"/>
                    <DataGridTextColumn Header="Course Name" Binding="{Binding CourseName}" Width="300"/>
                    <DataGridTextColumn Header="Term" Binding="{Binding TermName}" Width="150"/>
                    <DataGridTextColumn Header="Instructor" Binding="{Binding InstructorName}" Width="200"/>
                    <DataGridTextColumn Header="Status" Binding="{Binding Status}" Width="120"/>
                </DataGrid.Columns>

            </DataGrid>

        </GroupBox>



        <!-- ░░░ SHOW ENROLLMENTS BUTTON ░░░ -->
        <Button Name="enrollmentListButton"
                Grid.Row="4"
                Content="Show Enrollment List"
                Padding="15,7"
                Background="#9B59B6"
                Foreground="White"
                BorderThickness="0"
                Cursor="Hand"
                Click="enrollmentListButton_Click"/>
    </Grid>
</Window>
